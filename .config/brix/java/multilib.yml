context:
  tld: com.xenoterracide
commands:
- copy:
    source: project/copy/shared
    destination: .
    overwrite: true
- exec:
    commands:
    - git init
    - git add .
    - git commit -m initial
    - 'git remote add origin git@github.com:xenoterracide/{{project}}.git'
- template:
    source: module/build.gradle.kts.hbs
    destination: 'module/{{module}}/build.gradle.kts'
    overwrite: false
- template:
    source: module/src/main/java/module-info.java.hbs
    destination: 'module/{{module}}/src/main/java/module-info.java'
    overwrite: false
- template:
    source: project/templates/shared/package.json.hbs
    destination: 'package.json'
    overwrite: false
- template:
    source: project/templates/shared/settings.gradle.kts.hbs
    destination: 'settings.gradle.kts'
    overwrite: false
- mkdir:
    destination: "module/{{module}}/src/main/java/com/xenoterracide/{{module}}"
- mkdir:
    destination: "module/{{module}}/src/test/java/com/xenoterracide/{{module}}"
- exec:
    commands:
    - yarn up
    - ./gradlew dependencies --write-locks
    - git add .
    - ./gradlew spotlessApply
    - 'git commit -m "add deps"'
    stdout: true
